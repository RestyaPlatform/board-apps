(function() {
    var $dc = $(document);

    $dc.ready(function() {
        $('body').bind('appPopupAction', insertAppAction);
    });

    function insertAppAction(e) {
        if ($('#r_codenames_modal').find('.modal-footer').length > 0 && $('#r_codenames_modal .modal-body').find('#js-code-template').length === 0) {
            $('#r_codenames_modal .modal-body').append('<div id="js-code-template"><p>Buy or Listen <a class="text-primary" title="' + i18next.t('Quobuz') + '" href="https://restya.com/board/codenames?v=v1.7.1&s=qobuz" target="_blank">' + i18next.t('Quobuz') + '</a> , <a class="text-primary" title="' + i18next.t('Apple Music') + '" href="https://restya.com/board/codenames?v=v1.7.1&s=apple-music" target="_blank">Apple Music</a> , <a class="text-primary" title="' + i18next.t('Google Play Music') + '" href="https://restya.com/board/codenames?v=v1.7.1&s=google-play-music" target="_blank">Google Play Music</a> , <a class="text-primary" title="' + i18next.t('JioSaavn') + '" href="https://restya.com/board/codenames?v=v1.7.1&s=jiosaavn" target="_blank">' + i18next.t('JioSaavn') + '</a> , <a class="text-primary" title="' + i18next.t('YouTube') + '" href="https://restya.com/board/codenames?v=v1.7.1&s=youtube" target="_blank">' + i18next.t('YouTube') + '</a></p></div>');
        }
    }

    addRequestCallback(function(xhr, arg) {
        if (arg && arg[0] && arg[0].indexOf('codename_template') > -1) {
            var arr = JSON.parse(arg[0]);
            arr.background_picture_url = '//farm4.static.flickr.com/3516/3307756799_c833b5b1e0_b.jpg';
            arr.music_name = 'Scorpions - Still Loving You';
            arr.music_content = "X:1\nT:Scorpions - Still Loving You\nT:https://musescore.com/user/33546794/scores/6314217\n%%scale 0.83\n%%pagewidth 21.01cm\n%%leftmargin 1.00cm\n%%rightmargin 1.00cm\n%%score { 1 | 2 }\nL:1/8\nQ:1/\n4=100\nM:4/4\nI:linebreak $\nK:Bb\nV:1 treble nm=\"Piano\" snm=\"Pno.\"\nV:2 bass\nV:1\n!mp! z (bgd) z (bgd) | z (bgd _d'c'bg) | z2 (bg d2 B2) |$ z2 (a^f d2 A2) | z (bgd) z (bgd) | %5\nz (bgd _d'c'bg) |$ z2 (bg d2 B2) | z2 (a^f d2 A2-) | A8 |$ %9\n[M:6/8][Q:1/4=82]!p! [G-Bd-]3 [Gd]-[G-cd-][GB-d] | [GBd]3- [G-Bd-]2 [GBd] | %11\n[g-bd'-][g-bd'-][g-bd'-] [g-bd'-][gad'-][gd'] |$ [GBd]3 [G-Bd-][G-cd-][GBd] | [=EA^c]3- [EAc]3- | %14\n[EAc]3 [=E-A^c-][E-=Bc-][EAc] |$ [^FAd]3- [FAd]3- | [FAd]3 d-[Ad]-[^FAd] | %17\n[G-Bd-]3 [Gd]-[G-cd-][GB-d] |$ [GBd]3- [G-Bd-]2 [GBd] | %19\n[g-bd'-][g-bd'-][g-bd'-] [g-bd'-][gad'-][gd'] | [GBd]3 [G-Bd-][G-cd-][GBd] |$ [=EA^c]3- [EAc]3- | %22\n[EAc]3 [=E-A^c-][E-=Bc-][EAc] | [^FAd]3- [FAd]3- |$ [FAd]3 z3 |!mp! G2 (A/B/ c2) (B/A/ | %26\nB2) A/G/ A/B-B3/2- |$ B2 A A- A2- |[K:treble+8] A,3!mf! G2 (A/B/ | c2) (B/A/ B2) A/G/ |$ %30\nAB- B3 (c | A3-) A3 |[K:treble]\"_Expression\"!f! [G-B-d]3 [G-B-d]3/4 [GBd]2- [GBd]/4 |$ %33\n[B-eg-]3/2[B-fg-]3/4[Be-g]3/4 [Beg]3 | [F-B-d]3/2[F-B-d]3/4[F-Bd]3/4 z3/4 [F-c]3/4[FB]3/4c3/4- | %35\n[FAc]3 z3/2 B3/4A3/4 |$ [G-B-d]3 [G-B-d]3/4 [GBd]2- [GBd]/4 | %37\n[B-eg-]3/2[B-fg-]3/4[Be-g]3/4 [Beg]3 | [F-B-d]3/2[F-B-d]3/4[F-Bd]3/4 z3/4 [F-c]3/4[FB]3/4c3/4- |$ %39\n[FAc]3 z3/2 B3/4A3/4 | [G-B-d]2 [G-B-d] [G-B-d] [GBd]2 | [ce-g-]3/2[dg-]3/4[ceg] z2 a3/4 |$ %42\n[d^f-a-]2 [df-a] [df]- [dfa]2 | [gbd']4 ga | [e-gb-][e-ab-][egb] [egb]3- |$ [egb]3- [egb]2 e | %46\n[f-ac'-][fac']g<a z2 | z2 f bba |$ [bd']/-[ad'-]/ [gbd']3 z ^f- | [fg-b-e'-]4 [gbe']^f- | %50\n[f-fb-d'-]4 [fbd']c'- |$ [fac']2 z bba | [bd']/-[ad'-]/ [gbd']3 z ^f- | [fg-b-e'-] z3 [gbe']^f- |$ %54\n[ffbd']2 b bc'a- | [fac']2 z bba | [bd']/-[ad'-]/ [gbd']3 z ^f- |$ [fg-b-e'-] z3 [gbe']^f- | %58\n[ffbd']2 b b c'2 | [fac']2 z bba |$ [bd']/-[ad'-]/ [gbd']2- [gbd'] z ^f- | %61\n!>(! [fgbe']3- [fg-b-e'-][gbe']^f- | [ff-b-d'-]3 [fb-d'-][bd']c'- |$ [fac']2 z bba!>)! | %64\n[bd']-[ad'-][gbd'] z3 |!pp! [DGBd]4 z2 |] %66\nV:2\n[G,B,D]4 [F,B,D]4 | [G,B,E]8 | [G,B,D]4 z4 |$ [^F,A,D]8 | [G,B,D]4 [F,B,D]4 | [G,B,E]8 |$ %6\n[G,B,D]8 | [^F,A,-D]8 | A,8 |$[M:6/8] [G,B,D]3 [G,B,D]3 | [G,B,D]3 [G,B,D]3 | [G,B,D]3 [G,B,D]3 |$ %12\n[G,B,D]3 [G,B,D]3 | [=E,A,^C]3 [E,A,C]3 | [=E,A,^C]3 [E,A,C]3 |$ [^F,A,D]3 [F,A,D]3 | %16\n[^F,A,D]3 [F,A,D]3 | [G,B,D]3 [G,B,D]3 |$ [G,B,D]3 [G,B,D]3 | [G,B,D]3 [G,B,D]3 | %20\n[G,B,D]3 [G,B,D]3 |$ [=E,A,^C]3 [E,A,C]3 | [=E,A,^C]3 [E,A,C]3 | [^F,A,D]3 [F,A,D]3 |$ %24\n[^F,A,D]3 [F,A,D]3 | [G,B,D]3 [G,CE]3 | [G,B,D]3 [F,A,C]3 |$ [F,A,C]3 [F,A,C]3 | %28\n[K:treble] [F,A,C]3 [GBd]3 | [Gce]3 [GBd]3 |$ [FAc]3 [FAc]3 | [FAc]3 [FAc]3 | %32\n[K:bass] [G,B,D]3 [G,B,D]3 |$ [G,B,E]3 [G,B,E]3 | [F,B,D]3 [F,B,D]3 | [F,A,C]3 [F,A,C]3 |$ %36\n[G,B,D]3 [G,B,D]3 | [G,B,E]3 [G,B,E]3 | [F,B,D]3 [F,B,D]3 |$ [F,A,C]3 [F,A,C]3 | %40\n[G,B,D]3 [G,B,D]3 | [G,CE]3 [G,CE]3 |$ [^F,A,D]3 [F,A,D]3 | [G,B,D]3 [G,B,D]3 | %44\n[G,B,E]3 [G,B,E]3 |$ [G,B,E]3 [G,B,E]3 | [F,A,C]3 [F,A,C]3 | [F,A,C]3 [F,A,C]3 |$ %48\n[G,B,D]3 [G,B,D]3 | [G,B,E]3 [G,B,E]3 | [F,B,D]3 [F,B,D]3 |$ [F,A,C]3 [F,A,C]3 | %52\n[G,B,D]3 [G,B,D]3 | [G,B,E]3 [G,B,E]3 |$ [F,B,D]3 [F,B,D]3 | [F,A,C]3 [F,A,C]3 | %56\n[G,B,D]3 [G,B,D]3 |$ [G,B,E]3 [G,B,E]3 | [F,B,D]3 [F,B,D]3 | [F,A,C]3 [F,A,C]3 |$ %60\n[G,B,D]3 [G,B,D]3 | [G,B,E]3 [G,B,E]3 | [F,B,D]3 [F,B,D]3 |$ [F,A,C]3 [F,A,C]3 | %64\n[G,B,D]3- [G,B,D]3 | [G,,B,,D,G,]4 z2 |] %66";
            arg[0] = JSON.stringify(arr);
        }
    });
})();
